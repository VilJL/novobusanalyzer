add_subdirectory(AdvancedUIPlugin)
add_subdirectory(DmGraph)

add_custom_command(
  OUTPUT ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/intl.dll
  COMMAND ${CMAKE_COMMAND} ARGS -E make_directory ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/
  COMMAND ${CMAKE_COMMAND} ARGS -E copy ${CMAKE_CURRENT_SOURCE_DIR}/GetText/bin/intl.dll ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/
)

add_custom_command(
  OUTPUT ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/libxml2.dll
  COMMAND ${CMAKE_COMMAND} ARGS -E make_directory ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/
  COMMAND ${CMAKE_COMMAND} ARGS -E copy ${CMAKE_CURRENT_SOURCE_DIR}/libxml2/bin/libxml2.dll ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/)

add_custom_command(
  OUTPUT ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}//zlib1.dll
  COMMAND ${CMAKE_COMMAND} ARGS -E make_directory ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/
  COMMAND ${CMAKE_COMMAND} ARGS -E copy ${CMAKE_CURRENT_SOURCE_DIR}/zlib/bin/zlib1.dll ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/
)

add_custom_target(EXTERNAL ALL
  DEPENDS
  ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/iconv.dll
  ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/intl.dll
  ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/libxml2.dll
  ${CMAKE_BINARY_DIR}/${CMAKE_BUILD_TYPE}/zlib1.dll
)
